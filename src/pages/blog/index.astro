---
import { getCollection } from "astro:content";
import BaseLayout from "../../layouts/BaseLayout.astro";

const posts = await getCollection("blog");
posts.sort(
  (a, b) =>
    new Date(b.data.publishDate).getTime() -
    new Date(a.data.publishDate).getTime()
);
---

<BaseLayout title="Fishing Blog">
  <h1>Fishing Articles</h1>

  <section class="post-grid">
    {posts.map((post) => (
      <article class="post-card">
        <h2>
          <a href={`${Astro.base}blog/${post.slug}/`}>
            {post.data.title}
          </a>
        </h2>

        <p class="meta">
          {new Date(post.data.publishDate).toLocaleDateString()}
        </p>

        <p>{post.data.description}</p>

        <a class="read-more" href={`${Astro.base}blog/${post.slug}/`}>
          Read â†’
        </a>
      </article>
    ))}
  </section>
</BaseLayout>
