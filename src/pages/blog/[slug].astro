---
// src/pages/blog/[slug].astro
import BaseLayout from '../../layouts/BaseLayout.astro';
import { getEntryBySlug, getCollection } from 'astro:content';
const BASE_URL = import.meta.env.BASE_URL || '/';

const { slug } = Astro.params;
const post = await getEntryBySlug('blog', slug);

if (!post) {
  throw new Error(`Post not found: ${slug}`);
}
---

<BaseLayout title={post.data.title}>
  <article class="blog-post">
    <h1>{post.data.title}</h1>
    <p class="post-meta">{new Date(post.data.publishDate).toLocaleDateString()}</p>
    {post.data.image && <img src={post.data.image} alt={post.data.title} />}
    <div class="post-content">
      <post.Content />
    </div>
    <div class="back-home">
      <a href={BASE_URL} class="btn-primary">Back to Home</a>
    </div>
  </article>
</BaseLayout>
