---
import { getCollection } from 'astro:content';
import BaseLayout from '../../layouts/BaseLayout.astro';

const { slug } = Astro.params;

// Tell Astro which posts exist
export async function getStaticPaths() {
  const posts = await getCollection('blog');
  return posts.map((post) => ({
    params: { slug: post.slug },
  }));
}

// Get the post by slug
const post = await getCollection('blog').then((posts) =>
  posts.find((p) => p.slug === slug)
);

if (!post) {
  throw new Error(`Post not found: ${slug}`);
}
---

<BaseLayout title={post.data.title} description={post.data.description}>
  <article style="max-width: 800px; margin: auto; padding:2rem; background:white; border-radius:0.5rem; box-shadow:0 4px 12px rgba(0,0,0,0.08); line-height:1.75; font-family: 'Helvetica Neue', sans-serif;">

    <!-- Title -->
    <h1 style="margin-bottom: 0.5rem; font-size:2.5rem; line-height:1.2;">{post.data.title}</h1>
    <p style="color:#777; margin-bottom:1.5rem; font-size:0.95rem;">Published on {post.data.publishDate}</p>

    <!-- Feature Image -->
    {post.data.image && (
      <img src={post.data.image} alt={post.data.title} style="width:100%; object-fit:cover; border-radius:0.5rem; margin:1rem 0;" />
    )}

    <!-- Content -->
    <div style="margin-top:1.5rem; font-size:1.05rem; color:#111;">
      <!-- Render markdown body -->
      {post.body}
    </div>

    <!-- Back to home -->
    <p style="margin-top:3rem; font-size:1rem;">
      <a href="/fishing/" style="font-weight:bold; color:#00c49f;">‚Üê Back to Home</a>
    </p>

    <hr style="margin:3rem 0; border:none; border-top:1px solid #eee;" />

    <!-- Suggested styling for headings, lists, and quotes -->
    <style>
      article h2 {
        font-size: 1.8rem;
        margin-top: 2rem;
        margin-bottom: 1rem;
        color: #0070f3;
      }
      article h3 {
        font-size: 1.4rem;
        margin-top: 1.5rem;
        margin-bottom: 1rem;
        color: #0070f3;
      }
      article p {
        margin-bottom: 1rem;
      }
      article ul, article ol {
        margin: 1rem 0 1rem 2rem;
      }
      article blockquote {
        margin: 1.5rem 0;
        padding: 1rem 1.5rem;
        background: #f9f9f9;
        border-left: 4px solid #00c49f;
        font-style: italic;
        color: #555;
      }
      article img {
        max-width: 100%;
        height: auto;
        margin: 1rem 0;
      }
      article a {
        color: #00c49f;
        text-decoration: none;
      }
      article a:hover {
        text-decoration: underline;
      }
      article pre {
        background: #f4f4f4;
        padding: 1rem;
        border-radius: 0.4rem;
        overflow-x: auto;
      }
      article code {
        background: #f4f4f4;
        padding: 0.2rem 0.4rem;
        border-radius: 0.3rem;
        font-family: monospace;
      }
    </style>

  </article>
</BaseLayout>
