---
import BaseLayout from "../layouts/BaseLayout.astro";
import { getCollection } from "astro:content";

const posts = await getCollection("blog");

posts.sort(
  (a, b) =>
    new Date(b.data.date).getTime() - new Date(a.data.date).getTime()
);
---

<BaseLayout title="Blog">
  <h1>Fishing Blog</h1>

  <ul>
    {posts.map((post) => (
      <li>
        <h2>
          <a href={`${Astro.base}blog/${post.slug}/`}>
            {post.data.title}
          </a>
        </h2>
        <p>{post.data.description}</p>
        <small>
          {new Date(post.data.date).toLocaleDateString("en-US", {
            year: "numeric",
            month: "long",
            day: "numeric",
          })}
        </small>
      </li>
    ))}
  </ul>
</BaseLayout>
