---
import BaseLayout from "../layouts/BaseLayout.astro";
import { getCollection } from "astro:content";

const posts = await getCollection("blog");
const sorted = posts.sort((a, b) => b.data.date.valueOf() - a.data.date.valueOf());
const featured = sorted[0];
const rest = sorted.slice(1);
---

<BaseLayout
  title="Norx Fishing – Modern Fishing Strategy"
  description="Bass, redfish, and inshore fishing tactics. Gear reviews and seasonal strategy."
>
  <section class="hero">
    <div class="container">
      <h1>Modern Fishing Strategy</h1>
      <p>Actionable tactics, seasonal breakdowns, and real-world fishing insight.</p>
    </div>
  </section>

  {featured && (
    <section class="featured-post container">
      <a
        class="featured-card"
        href={`${import.meta.env.BASE_URL}blog/${featured.slug}/`}
      >
        <div class="featured-content">
          <span class="tag">Featured</span>
          <h2>{featured.data.title}</h2>
          <p>{featured.data.description}</p>
          <span class="read-more">Read article →</span>
        </div>
      </a>
    </section>
  )}

  <section class="post-grid container">
    {rest.map((post) => (
      <article class="post-card">
        <a href={`${import.meta.env.BASE_URL}blog/${post.slug}/`}>
          <h3>{post.data.title}</h3>
          <p>{post.data.description}</p>
          <span class="meta">
            {post.data.date.toLocaleDateString()}
          </span>
        </a>
      </article>
    ))}
  </section>
</BaseLayout>
