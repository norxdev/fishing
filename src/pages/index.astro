---
import { getCollection } from 'astro:content';
import BaseLayout from '../layouts/BaseLayout.astro';

const posts = await getCollection('blog');
posts.sort((a, b) => new Date(b.data.publishDate) - new Date(a.data.publishDate));
---

<BaseLayout title="Top Water Angler" description="Catch the latest fishing tips, gear reviews, and adventure stories.">

  <section class="hero">
    <h2>Welcome to Top Water Angler</h2>
    <p>Your go-to blog for fishing tips, gear, and adventure stories.</p>
    <a href="/fishing/blog/" class="button">Read the Blog →</a>
  </section>

  <section class="recent-posts">
    <h2>Recent Posts</h2>
    <div class="post-grid">
      {posts.map(post => (
        <div class="post-card">
          <img src={post.data.image || "https://source.unsplash.com/600x300/?fishing"} alt={post.data.title} />
          <h3><a href={`/fishing/blog/${post.slug}/`}>{post.data.title}</a></h3>
          <p class="post-date">{new Date(post.data.publishDate).toLocaleDateString()}</p>
          <p>{post.data.description}</p>
          <a class="button" href={`/fishing/blog/${post.slug}/`}>Read →</a>
        </div>
      ))}
    </div>
  </section>

</BaseLayout>
