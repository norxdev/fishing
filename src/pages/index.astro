---
import { getCollection } from 'astro:content';
import BaseLayout from '../layouts/BaseLayout.astro';

const posts = await getCollection('blog');
---

<BaseLayout title="Fishing Blog" description="Latest fishing tips and guides">
  <section>
    <h2>Latest Posts</h2>
    <div style="display:grid; gap:2rem; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));">
      {posts.map(post => (
        <article class="card">
          {post.data.image && <img src={post.data.image} alt={post.data.title} />}
          <h3>
            <a href={`/fishing/blog/${post.slug}/`}>{post.data.title}</a>
          </h3>
          <p style="color:#777; font-size:0.9rem;">Published on {post.data.publishDate}</p>
          <p>{post.data.description}</p>
          <a href={`/fishing/blog/${post.slug}/`}>Read More â†’</a>
        </article>
      ))}
    </div>
  </section>
</BaseLayout>
