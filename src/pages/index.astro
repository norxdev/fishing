---
import BaseLayout from '../layouts/BaseLayout.astro';
import { getCollection } from 'astro:content';

const posts = await getCollection('blog');
const [heroPost, ...otherPosts] = posts.sort((a,b) => new Date(b.data.publishDate) - new Date(a.data.publishDate));
---

<BaseLayout title="Fishing Blog" description="Latest fishing tips, guides, and tutorials.">
  <section class="hero-post">
    <a href={`/fishing/blog/${heroPost.slug}/`}>
      {heroPost.data.image && <img src={heroPost.data.image} alt={heroPost.data.title} />}
      <h1>{heroPost.data.title}</h1>
      <p>{heroPost.data.description}</p>
    </a>
  </section>

  <section class="post-grid">
    {otherPosts.map(post => (
      <article>
        <a href={`/fishing/blog/${post.slug}/`}>
          {post.data.image && <img src={post.data.image} alt={post.data.title} />}
          <h2>{post.data.title}</h2>
          <p>{post.data.description}</p>
        </a>
        <p class="post-date">{post.data.publishDate}</p>
      </article>
    ))}
  </section>
</BaseLayout>
